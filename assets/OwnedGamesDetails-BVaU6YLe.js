import{s as f,r,A as N,j as e,H as i,F as d,a as k,t as v,v as y}from"./index-BsUWZn2c.js";const w="_container_5mq4m_1",A="_top_5mq4m_12",L="_info_5mq4m_26",S="_page_5mq4m_45",T="_gameTitle_5mq4m_55",q="_storeLink_5mq4m_60",B="_achContainer_5mq4m_71",C="_achBar_5mq4m_83",b="_achIcon_5mq4m_99",I="_achText_5mq4m_108",s={container:w,top:A,info:L,page:S,gameTitle:T,storeLink:q,achContainer:B,achBar:C,achIcon:b,achText:I};function G(){const[m]=f(),c=m.get("platform"),o=m.get("id"),{user:l}=r.useContext(N),[t,g]=r.useState(null),[j,u]=r.useState(!0);r.useEffect(()=>{window.scrollTo(0,0);const a=async()=>{try{const n=await k.post(`undefined/api/users/ownedgames/${c}/${o}`,{userId:l._id});g(n.data.game),console.log("Fetched owned game:",n.data.game)}catch(n){console.error("Fetch failed:",n)}finally{u(!1)}};l?._id&&c&&o&&a()},[l,void 0,c,o]);function h(a){const n=new Date(a);return isNaN(n.getTime())?null:n.toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}function p(){return t?.achievements?.length?t.achievements.map((a,n)=>{let x="Achievement still locked";return a.unlocked&&a.dateUnlocked&&(x=h(a.dateUnlocked)),e.jsxs("div",{className:s.achBar,style:{background:a.unlocked?"#0c3718":"#4f0f0d"},children:[e.jsx("div",{className:s.achIcon,children:a.unlocked?e.jsx(v,{color:"#00ff80"}):e.jsx(y,{color:"#ff4c4c"})}),e.jsxs("div",{className:s.achText,children:[e.jsx("h2",{children:a.title}),e.jsx("p",{children:a.description}),e.jsxs("p",{className:"date",children:["Unlocked on: ",x]})]})]},n)}):e.jsx("p",{children:"No achievements available for this game."})}if(j)return e.jsxs("div",{className:s.container,children:[e.jsx(i,{}),e.jsx("p",{className:s.loading,children:"Loading game details..."}),e.jsx(d,{})]});if(!t)return e.jsxs("div",{className:s.container,children:[e.jsx(i,{}),e.jsx("p",{className:s.error,children:"Game not found."}),e.jsx(d,{})]});const _=t.lastPlayed?h(t.lastPlayed):"Game hasn't been played";return e.jsxs("div",{className:s.container,children:[e.jsx(i,{}),e.jsxs("div",{className:s.page,children:[e.jsxs("div",{className:s.top,children:[e.jsxs("div",{className:s.info,children:[e.jsxs("h1",{className:s.gameTitle,children:[t.gameName," Details"]}),e.jsxs("div",{className:s.link,children:[e.jsx("label",{children:"Open Game at Steam Desktop App: "}),e.jsx("a",{className:s.storeLink,onClick:()=>window.location.href=`steam://store/${o}`,children:"Steam Link"})]}),e.jsxs("div",{className:s.link,children:[e.jsx("label",{children:"Open Game at Steam Website: "}),e.jsx("a",{className:s.storeLink,href:`https://store.steampowered.com/app/${o}`,target:"_blank",rel:"noopener noreferrer",children:"Steam Website"})]}),e.jsxs("p",{children:["You bought the game on:"," ",e.jsx("strong",{style:{color:"yellow"},children:c})]}),e.jsxs("p",{children:["Total hours played"," ",e.jsx("strong",{style:{color:"yellow"},children:t.hoursPlayed})]}),e.jsxs("p",{children:["Last played: ",e.jsx("strong",{style:{color:"yellow"},children:_})]})]}),e.jsx("div",{className:s.imgContainer,children:e.jsx("img",{src:t.coverImage,alt:t.gameName,loading:"lazy"})})]}),e.jsx("div",{className:s.achContainer,children:p()})]}),e.jsx(d,{})]})}export{G as default};
