import{r as d,A as p,b,j as e,H as v,F as N,a as o}from"./index-DMku4Un2.js";const f="_container_1goht_1",B="_page_1goht_12",C="_title_1goht_23",R="_tabs_1goht_29",k="_tab_1goht_29",y="_active_1goht_51",$="_content_1goht_57",q="_section_1goht_66",D="_input_1goht_75",P="_friendList_1goht_83",A="_friendBar_1goht_92",L="_btnPrimary_1goht_107",F="_btnDanger_1goht_122",U="_btnBack_1goht_136",n={container:f,page:B,title:C,tabs:R,tab:k,active:y,content:$,section:q,input:D,friendList:P,friendBar:A,btnPrimary:L,btnDanger:F,btnBack:U};function M(){const{user:i}=d.useContext(p),u=b(),[c,r]=d.useState("add"),[h,g]=d.useState(""),a=i?.friends?Object.values(i.friends).flat().filter(s=>s.source==="User"):[];console.log(a);const _=async s=>{const t=await o.post(`undefined/friends/add/${s}`,{userId:i._id});console.log(t.data)},m=async s=>{const t=await o.post(`undefined/friends/accept/${s}`,{userId:i._id});console.log(t.data)},l=async s=>{const t=await o.post(`undefined/friends/reject/${s}`,{userId:i._id});console.log(t.data)},x=async s=>{const t=await o.post(`undefined/friends/remove/${s}`,{userId:i._id});console.log(t.data)},j=()=>{switch(c){case"add":return e.jsxs("div",{className:n.section,children:[e.jsx("h2",{children:"Add Friend"}),e.jsx("input",{type:"text",placeholder:"Enter UserID",className:n.input,onChange:s=>g(s.target.value)}),e.jsx("button",{className:n.btnPrimary,onClick:()=>_(h),children:"Send Request"})]});case"sent":return e.jsxs("div",{className:n.section,children:[e.jsx("h2",{children:"Pending Requests (Sent)"}),e.jsx("ul",{className:n.friendList,children:a.filter(s=>s.status==="pending"&&s.requestedByMe).length?a.filter(s=>s.status==="pending"&&s.requestedByMe).map((s,t)=>e.jsxs("li",{className:n.friendBar,children:[e.jsx("span",{children:s.displayName||"Unknown"}),e.jsx("button",{className:n.btnDanger,onClick:()=>l(s.user),children:"Cancel"})]},t)):e.jsx("li",{children:"No pending requests sent"})})]});case"received":return e.jsxs("div",{className:n.section,children:[e.jsx("h2",{children:"Pending Requests (Received)"}),e.jsx("ul",{className:n.friendList,children:a.filter(s=>s.status==="pending"&&!s.requestedByMe).length?a.filter(s=>s.status==="pending"&&!s.requestedByMe).map((s,t)=>e.jsxs("li",{className:n.friendBar,children:[e.jsx("span",{children:s.displayName||"Unknown"}),e.jsxs("div",{children:[e.jsx("button",{className:n.btnPrimary,onClick:()=>m(s.user),children:"Accept"}),e.jsx("button",{className:n.btnDanger,onClick:()=>l(s.user),children:"Reject"})]})]},t)):e.jsx("li",{children:"No pending requests received"})})]});case"remove":return e.jsxs("div",{className:n.section,children:[e.jsx("h2",{children:"Remove Friend"}),e.jsx("ul",{className:n.friendList,children:a.filter(s=>s.status==="accepted").length?a.filter(s=>s.status==="accepted").map((s,t)=>e.jsxs("li",{className:n.friendBar,children:[e.jsx("span",{children:s.displayName||"Unknown"}),e.jsx("button",{className:n.btnDanger,onClick:()=>x(s.user),children:"Remove"})]},t)):e.jsx("li",{children:"No friends to remove"})})]});default:return null}};return e.jsxs("div",{className:n.container,children:[e.jsx(v,{}),e.jsxs("div",{className:n.page,children:[e.jsx("h1",{className:n.title,children:"Manage Friends"}),e.jsxs("div",{className:n.tabs,children:[e.jsx("button",{className:`${n.tab} ${c==="add"?n.active:""}`,onClick:()=>r("add"),children:" Add Friend "}),e.jsx("button",{className:`${n.tab} ${c==="sent"?n.active:""}`,onClick:()=>r("sent"),children:" Pending Sent "}),e.jsx("button",{className:`${n.tab} ${c==="received"?n.active:""}`,onClick:()=>r("received"),children:" Pending Received "}),e.jsx("button",{className:`${n.tab} ${c==="remove"?n.active:""}`,onClick:()=>r("remove"),children:" Remove Friend "})]}),e.jsx("div",{className:n.content,children:j()}),e.jsx("button",{className:n.btnBack,onClick:()=>u("/friends"),children:" â† Back to Friends "})]}),e.jsx(N,{})]})}export{M as default};
