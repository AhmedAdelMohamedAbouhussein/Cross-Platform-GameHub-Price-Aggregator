import{r as o,A as x,b as N,j as e,H as v,F,a as l}from"./index-wC0oTaiJ.js";import{b as h,e as y,f as b}from"./index-BR_uzxDn.js";import{S as k,a as g,b as B,c as I}from"./index-BLlw5zry.js";const S="_container_v9cjp_1",A="_page_v9cjp_11",C="_top_v9cjp_20",U="_iconCircle_v9cjp_36",L="_title_v9cjp_48",G="_friendList_v9cjp_54",E="_friendBar_v9cjp_63",P="_friendImage_v9cjp_78",q="_friendInfo_v9cjp_86",w="_friendName_v9cjp_92",M="_friendId_v9cjp_97",X="_friendLink_v9cjp_102",D="_noFriends_v9cjp_113",H="_addFriendBtn_v9cjp_120",n={container:S,page:A,top:C,iconCircle:U,title:L,friendList:G,friendBar:E,friendImage:P,friendInfo:q,friendName:w,friendId:M,friendLink:X,noFriends:D,addFriendBtn:H};function z(){const{user:t,setUser:d}=o.useContext(x),[p,c]=o.useState(!1),u=N(),f=[{key:"User",label:"App Friends",icon:h,color:"#FFD700"},{key:"Steam",label:"Steam Friends",icon:y,color:"#091cb2ff"},{key:"Xbox",label:"Xbox Friends",icon:b,color:"#107C10"},{key:"Epic",label:"Epic Games Friends",icon:k,color:"#444"},{key:"PS",label:"PlayStation Friends",icon:g,color:"#003087"},{key:"Nintendo",label:"Nintendo Friends",icon:B,color:"#E60012"},{key:"GOG",label:"GOG Friends",icon:I,color:"#6c43a1"}],_=async s=>{c(!0);try{await l.post(`/friends/add/${s}`,{userId:t._id}),d(a=>{const r={...a};return r.friends.User||(r.friends.User=[]),r.friends.User.push({user:s,status:"pending",requestedByMe:!0}),r})}catch(a){console.error(a)}c(!1)},m=async s=>{c(!0);try{await l.post(`/friends/accept/${s}`,{userId:t._id}),d(a=>{const r={...a};return r.friends.User=r.friends.User.map(i=>i.user===s?{...i,status:"accepted"}:i),r})}catch(a){console.error(a)}c(!1)},j=s=>s.status==="accepted"?e.jsx("button",{disabled:!0,className:n.friendBtn,children:"Friends"}):s.status==="pending"&&s.requestedByMe?e.jsx("button",{disabled:!0,className:n.friendBtn,children:"Request Sent"}):s.status==="pending"&&!s.requestedByMe?e.jsx("button",{onClick:()=>m(s.user),className:n.friendBtnAccept,children:"Accept"}):e.jsx("button",{onClick:()=>_(s.user),className:n.friendBtnAdd,children:"Add Friend"});return e.jsxs("div",{className:n.container,children:[e.jsx(v,{}),f.map(s=>{const a=s.icon;return e.jsxs("div",{className:n.page,children:[e.jsxs("div",{className:n.top,children:[e.jsx("div",{className:n.iconCircle,style:{backgroundColor:s.color},children:e.jsx(a,{size:36})}),e.jsx("div",{className:n.info,children:e.jsx("h1",{className:n.title,children:s.label})}),s.key==="User"&&e.jsx("button",{className:n.addFriendBtn,onClick:()=>u("/addfriend"),children:" Add Friend "})]}),e.jsx("ul",{className:n.friendList,children:t?.friends?.[s.key]?.length?t.friends[s.key].map((r,i)=>e.jsxs("li",{className:n.friendBar,children:[e.jsx("div",{className:n.friendImage,children:r.avatar&&e.jsx("img",{src:r.avatar,alt:r.displayName||"Friend avatar",className:n.avatar})}),e.jsxs("div",{className:n.friendInfo,children:[e.jsx("div",{className:n.friendName,children:r.displayName||"Unknown"}),r.externalId&&e.jsxs("div",{className:n.friendId,children:[s.key," ID: ",r.externalId]}),r.profileUrl&&e.jsx("a",{href:r.profileUrl,target:"_blank",rel:"noreferrer",className:n.friendLink,children:"View Profile"})]}),e.jsx("div",{className:n.friendAction,children:s.key==="User"&&!p&&j(r)})]},i)):e.jsx("li",{className:n.noFriends,children:"No friends found"})})]},s.key)}),e.jsx(F,{})]})}export{z as default};
