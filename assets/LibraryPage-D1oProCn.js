import{g as O,j as r,b as R,r as m,A as N,H as S,F as k}from"./index-BAM4DcJk.js";import{A as W}from"./Aside-BVH8UHIA.js";import"./index-DJGzJsYh.js";var y={exports:{}},h,j;function E(){if(j)return h;j=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return h=s,h}var x,T;function I(){if(T)return x;T=1;var s=E();function o(){}function n(){}return n.resetWarningCache=o,x=function(){function e(g,c,a,_,v,d){if(d!==s){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:o};return i.PropTypes=i,i},x}var b;function q(){return b||(b=1,y.exports=I()()),y.exports}var F=q();const l=O(F),G="_card_1mlff_1",A="_defaultOverlay_1mlff_30",D="_progressWrapper_1mlff_40",L="_cardImage_1mlff_59",$="_classTitle_1mlff_78",p={card:G,defaultOverlay:A,progressWrapper:D,cardImage:L,classTitle:$},M="_progressCircle_q6ean_1",H="_progressCircleText_q6ean_12",P={progressCircle:M,progressCircleText:H};function V({progress:s}){const e=2*Math.PI*45,t=e*(1-s/100);return r.jsxs("svg",{width:"100",height:"100",className:P.progressCircle,children:[r.jsx("circle",{cx:"50",cy:"50",r:45,stroke:"#e6e6e6",strokeWidth:10,fill:"none"}),r.jsx("circle",{cx:"50",cy:"50",r:45,stroke:"#4caf50",strokeWidth:10,fill:"none",strokeDasharray:e,strokeDashoffset:t,strokeLinecap:"round",transform:"rotate(-90 50 50)"}),r.jsxs("text",{x:"50%",y:"50%",textAnchor:"middle",dy:"0.3em",className:P.progressCircleText,children:[s,"%"]})]})}function C(s){const o=s.id,n=s.platform.trim(),e=s.title,t=s.image.trim()!==""?s.image:"https://static.vecteezy.com/system/resources/previews/008/255/804/non_2x/page-not-found-error-404-system-updates-uploading-computing-operation-installation-programs-system-maintenance-graffiti-sprayed-page-not-found-error-404-isolated-on-white-background-vector.jpg",i=s.progress,g=s.lastPlayed?new Date(s.lastPlayed).toLocaleDateString():"Game hasn't been played",c=R(),a=m.useRef(null),[_,v]=m.useState(!1);return m.useEffect(()=>{const d=new IntersectionObserver(u=>{u.forEach(w=>{w.isIntersecting&&(console.log(`Card ${e} is now visible`),v(!0),d.disconnect())})},{threshold:.2});return a.current&&d.observe(a.current),()=>{a.current&&d.unobserve(a.current)}},[]),r.jsx("div",{ref:a,className:p.card,onClick:()=>c(`/ownedgamedetails?platform=${n}&id=${o}`),children:_?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:t,alt:e+" picture",loading:"lazy",className:p.cardImage}),r.jsx("h2",{className:p.classTitle,children:s.title}),r.jsxs("p",{children:["Bought on: ",n]}),r.jsx("div",{className:p.progressWrapper,children:r.jsx(V,{progress:i})}),r.jsx("div",{className:p.defaultOverlay,children:r.jsx("p",{children:"Hover to see progress"})}),r.jsxs("p",{children:["Last Played: ",g]})]}):r.jsx("div",{className:p.placeholder,children:"Loading..."})})}C.propTypes={title:l.string.isRequired,image:l.string,platform:l.string,progress:l.number,lastPlayed:l.oneOfType([l.string,l.instanceOf(Date)])};const z="_container_j4fgl_1",B="_body_j4fgl_9",U="_main_j4fgl_15",Y="_cardGrid_j4fgl_23",f={container:z,body:B,main:U,cardGrid:Y};function X(){const{user:s}=m.useContext(N);m.useEffect(()=>{window.scrollTo(0,0)},[]);const o=()=>{if(!s?.ownedGames)return null;const n=new Map(Object.entries(s.ownedGames));return Array.from(n.entries()).flatMap(([e,t])=>{const i=new Map(Object.entries(t));return Array.from(i.entries()).sort((c,a)=>a[1].progress-c[1].progress).map(([c,a])=>r.jsx(C,{id:c,platform:e,image:a.coverImage,title:a.gameName,progress:a.progress,lastPlayed:a.lastPlayed},`${e}-${c}`))})};return r.jsxs("div",{className:f.container,children:[r.jsx(S,{}),r.jsxs("div",{className:f.body,children:[r.jsx(W,{}),r.jsx("main",{className:f.main,children:r.jsx("div",{className:f.cardGrid,children:o()})})]}),r.jsx(k,{})]})}export{X as default};
