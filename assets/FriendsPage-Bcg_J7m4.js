import{r,A as x,u as F,j as e,L as h,f as N,l as g,m as v,H as I,h as k,F as y,a as p}from"./index-CRMV-imM.js";import{S as b,a as S,b as L,c as U}from"./index-CjhSGFM8.js";const B="_container_v9cjp_1",C="_page_v9cjp_11",E="_top_v9cjp_20",A="_iconCircle_v9cjp_36",P="_title_v9cjp_48",D="_friendList_v9cjp_54",w="_friendBar_v9cjp_63",G="_friendImage_v9cjp_78",R="_friendInfo_v9cjp_86",$="_friendName_v9cjp_92",X="_friendId_v9cjp_97",H="_friendLink_v9cjp_102",K="_noFriends_v9cjp_113",O="_addFriendBtn_v9cjp_120",n={container:B,page:C,top:E,iconCircle:A,title:P,friendList:D,friendBar:w,friendImage:G,friendInfo:R,friendName:$,friendId:X,friendLink:H,noFriends:K,addFriendBtn:O};function J(){const{user:c}=r.useContext(x),[l,f]=r.useState(null),[_,d]=r.useState(!0),m=F();r.useEffect(()=>{const i=async()=>{d(!0);try{let s={...(await p.post("undefined/api/users/friendlist",{publicID:c.publicID})).data.friends};const t=await Promise.all((s.User||[]).map(async o=>{console.log("Fetching details for friend:",o.user);const u=await p.get(`undefined/api/users/${encodeURIComponent(o.user)}`);return{...o,...u.data.user}}));s.User=t,f(s),console.log("Fetched friends:",s)}catch(a){console.error("Failed to fetch friends:",a)}finally{d(!1)}};c?.publicID&&i()},[c]);const j=[{key:"User",label:"App Friends",icon:N,color:"#FFD700"},{key:"Steam",label:"Steam Friends",icon:g,color:"#091cb2ff"},{key:"Xbox",label:"Xbox Friends",icon:v,color:"#107C10"},{key:"Epic",label:"Epic Games Friends",icon:b,color:"#444"},{key:"PSN",label:"PlayStation Friends",icon:S,color:"#003087"},{key:"Nintendo",label:"Nintendo Friends",icon:L,color:"#E60012"},{key:"GOG",label:"GOG Friends",icon:U,color:"#6c43a1"}];return _?e.jsx(h,{}):e.jsxs("div",{className:n.container,children:[e.jsx(I,{}),j.map(i=>{const a=i.icon;return e.jsxs("div",{className:n.page,children:[e.jsxs("div",{className:n.top,children:[e.jsx("div",{className:n.iconCircle,style:{backgroundColor:i.color},children:e.jsx(a,{size:36})}),e.jsx("div",{className:n.info,children:e.jsx("h1",{className:n.title,children:i.label})}),i.key==="User"&&e.jsx("button",{className:n.addFriendBtn,onClick:()=>m("/managefriends"),children:"Manage Friends"})]}),e.jsx("ul",{className:n.friendList,children:l?.[i.key]?.filter(s=>s.status==="accepted").length>0?l[i.key].filter(s=>s.status==="accepted").map((s,t)=>e.jsxs("li",{className:n.friendBar,children:[e.jsx("div",{className:n.friendImage,children:e.jsx("img",{src:s.avatar||s.profilePicture||"https://digitalhealthskills.com/wp-content/uploads/2022/11/3da39-no-user-image-icon-27.png",alt:s.displayName||s.name||"Friend avatar",className:n.avatar})}),e.jsxs("div",{className:n.friendInfo,children:[e.jsx("div",{className:n.friendName,children:i.key==="User"?s.name||s.email||"Unknown":s.displayName||"Unknown"}),i.key==="User"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:n.friendId,children:[" UserID: ",s.publicID," "]}),e.jsx(k,{to:`/friends/viewprofile/${s.publicID}`,className:n.friendLink,children:" View Profile "})]}):e.jsxs(e.Fragment,{children:[s.externalId&&e.jsxs("div",{className:n.friendId,children:[i.key," ID: ",s.externalId]}),s.profileUrl&&e.jsx("a",{href:s.profileUrl,target:"_blank",rel:"noreferrer",className:n.friendLink,children:"View Profile"})]})]})]},t)):e.jsx("li",{className:n.noFriends,children:"No accepted friends found"})})]},i.key)}),e.jsx(y,{})]})}export{J as default};
