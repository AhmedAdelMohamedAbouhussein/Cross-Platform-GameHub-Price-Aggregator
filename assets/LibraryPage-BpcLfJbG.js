import{g as R,j as e,b as N,r as m,A as S,H as k,F as W}from"./index-9_ozb1Mf.js";import{A as E}from"./Aside-zmohK1_J.js";import"./index-B55BpXnN.js";var h={exports:{}},x,j;function I(){if(j)return x;j=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return x=s,x}var _,T;function q(){if(T)return _;T=1;var s=I();function n(){}function o(){}return o.resetWarningCache=n,_=function(){function r(y,c,a,d,v,g){if(g!==s){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function t(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:t,element:r,elementType:r,instanceOf:t,node:r,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:n};return i.PropTypes=i,i},_}var P;function F(){return P||(P=1,h.exports=q()()),h.exports}var G=F();const l=R(G),A="_card_1mlff_1",D="_defaultOverlay_1mlff_30",L="_progressWrapper_1mlff_40",$="_cardImage_1mlff_59",M="_classTitle_1mlff_78",u={card:A,defaultOverlay:D,progressWrapper:L,cardImage:$,classTitle:M},H="_progressCircle_q6ean_1",V="_progressCircleText_q6ean_12",b={progressCircle:H,progressCircleText:V};function z({progress:s}){const r=2*Math.PI*45,t=r*(1-s/100);return e.jsxs("svg",{width:"100",height:"100",className:b.progressCircle,children:[e.jsx("circle",{cx:"50",cy:"50",r:45,stroke:"#e6e6e6",strokeWidth:10,fill:"none"}),e.jsx("circle",{cx:"50",cy:"50",r:45,stroke:"#4caf50",strokeWidth:10,fill:"none",strokeDasharray:r,strokeDashoffset:t,strokeLinecap:"round",transform:"rotate(-90 50 50)"}),e.jsxs("text",{x:"50%",y:"50%",textAnchor:"middle",dy:"0.3em",className:b.progressCircleText,children:[s,"%"]})]})}function C(s){const n=s.id,o=s.platform.trim(),r=s.title,t=s.image.trim()!==""?s.image:"https://static.vecteezy.com/system/resources/previews/008/255/804/non_2x/page-not-found-error-404-system-updates-uploading-computing-operation-installation-programs-system-maintenance-graffiti-sprayed-page-not-found-error-404-isolated-on-white-background-vector.jpg",i=s.progress,y=s.lastPlayed?new Date(s.lastPlayed).toLocaleDateString():"Game hasn't been played",c=s.hoursPlayed,a=N(),d=m.useRef(null),[v,g]=m.useState(!1);return m.useEffect(()=>{const p=new IntersectionObserver(w=>{w.forEach(O=>{O.isIntersecting&&(console.log(`Card ${r} is now visible`),g(!0),p.disconnect())})},{threshold:.2});return d.current&&p.observe(d.current),()=>{d.current&&p.unobserve(d.current)}},[]),e.jsx("div",{ref:d,className:u.card,onClick:()=>a(`/ownedgamedetails?platform=${o}&id=${n}`),children:v?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t,alt:r+" picture",loading:"lazy",className:u.cardImage}),e.jsx("h2",{className:u.classTitle,children:s.title}),e.jsxs("p",{children:["Bought on: ",o]}),e.jsx("div",{className:u.progressWrapper,children:e.jsx(z,{progress:i})}),e.jsx("div",{className:u.defaultOverlay,children:e.jsx("p",{children:"Hover to see progress"})}),e.jsxs("p",{children:["Total Hours: ",c]}),e.jsxs("p",{children:["Last Played: ",y]})]}):e.jsx("div",{className:u.placeholder,children:"Loading..."})})}C.propTypes={title:l.string.isRequired,image:l.string,platform:l.string,progress:l.number,lastPlayed:l.oneOfType([l.string,l.instanceOf(Date)])};const B="_container_j4fgl_1",U="_body_j4fgl_9",Y="_main_j4fgl_15",J="_cardGrid_j4fgl_23",f={container:B,body:U,main:Y,cardGrid:J};function Z(){const{user:s}=m.useContext(S);m.useEffect(()=>{window.scrollTo(0,0)},[]);const n=()=>{if(!s?.ownedGames)return null;const o=new Map(Object.entries(s.ownedGames));return Array.from(o.entries()).flatMap(([r,t])=>{const i=new Map(Object.entries(t));return Array.from(i.entries()).sort((c,a)=>a[1].progress-c[1].progress).map(([c,a])=>e.jsx(C,{id:c,platform:r,image:a.coverImage,title:a.gameName,progress:a.progress,lastPlayed:a.lastPlayed,hoursPlayed:a.hoursPlayed},`${r}-${c}`))})};return e.jsxs("div",{className:f.container,children:[e.jsx(k,{}),e.jsxs("div",{className:f.body,children:[e.jsx(E,{}),e.jsx("main",{className:f.main,children:e.jsx("div",{className:f.cardGrid,children:n()})})]}),e.jsx(W,{})]})}export{Z as default};
