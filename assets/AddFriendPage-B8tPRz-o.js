import{r as t,A as h,j as e,a as B}from"./index-wC0oTaiJ.js";const C="_addFriendModule_kf8gp_1",F="_addFriendBtn_kf8gp_8",k="_sendBtn_kf8gp_8",I="_cancelBtn_kf8gp_8",j="_inputContainer_kf8gp_46",S="_friendInput_kf8gp_52",N="_message_kf8gp_58",n={addFriendModule:C,addFriendBtn:F,sendBtn:k,cancelBtn:I,inputContainer:j,friendInput:S,message:N};function M(){const[p,o]=t.useState(!1),[d,c]=t.useState(""),[s,u]=t.useState(!1),[l,a]=t.useState(""),{user:f,setUser:_}=t.useContext(h),g=void 0,m=async()=>{if(d.trim()){u(!0),a("");try{const r=await B.post(`${g}/friends/add/${d}`,{userId:f._id});_(x=>{const i={...x};return i.friends.User||(i.friends.User=[]),i.friends.User.push({user:d,status:"pending",requestedByMe:!0}),i}),a("Request sent!"),c(""),o(!1)}catch(r){console.error(r),a("Failed to send request.")}u(!1)}};return e.jsxs("div",{className:n.addFriendModule,children:[p?e.jsxs("div",{className:n.inputContainer,children:[e.jsx("input",{type:"text",placeholder:"Enter username or ID",value:d,onChange:r=>c(r.target.value),disabled:s,className:n.friendInput}),e.jsx("button",{onClick:m,disabled:s,className:n.sendBtn,children:s?"Sending...":"Send"}),e.jsx("button",{onClick:()=>{o(!1),a("")},disabled:s,className:n.cancelBtn,children:"Cancel"})]}):e.jsx("button",{className:n.addFriendBtn,onClick:()=>o(!0),disabled:s,children:"Add Friend"}),l&&e.jsx("div",{className:n.message,children:l})]})}export{M as default};
