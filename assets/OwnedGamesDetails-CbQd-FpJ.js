import{s as N,r as i,A as S,j as e,L as v,H as p,F as x,a as w,t as b,v as y}from"./index-CRMV-imM.js";const z="_container_1memk_1",A="_top_1memk_12",L="_info_1memk_26",C="_page_1memk_45",G="_gameTitle_1memk_55",I="_storeLink_1memk_60",B="_achContainer_1memk_71",P="_achBar_1memk_83",T="_achText_1memk_100",s={container:z,top:A,info:L,page:C,gameTitle:G,storeLink:I,achContainer:B,achBar:P,achText:T},D="/Web_App/assets/bronze-Bgn6DOiF.png",E="/Web_App/assets/silver-DV1mQrOL.png",U="/Web_App/assets/gold-B6wCK90w.png",F="/Web_App/assets/plat-CuWQImji.png";function O(c){switch(c.type){case"bronze":return e.jsx("img",{src:D,alt:"Bronze",width:50,height:65});case"silver":return e.jsx("img",{src:E,alt:"Silver",width:50,height:65});case"gold":return e.jsx("img",{src:U,alt:"Gold",width:50,height:65});case"platinum":return e.jsx("img",{src:F,alt:"Platinum",width:50,height:65})}return c.unlocked?e.jsx(b,{color:"#00ff80",size:45}):e.jsx(y,{color:"#ff4c4c",size:45})}function W(){const[l]=N(),o=l.get("platform"),r=l.get("id"),{user:m}=i.useContext(S),[n,j]=i.useState(null),[u,f]=i.useState(!0);i.useEffect(()=>{window.scrollTo(0,0),m&&o&&r&&(async()=>{try{const t=await w.post(`undefined/api/users/ownedgames/${o}/${r}`,{},{withCredentials:!0});j(t.data.game),console.log("Fetched owned game:",t.data.game)}catch(t){console.error("Fetch failed:",t)}finally{f(!1)}})()},[m,void 0,o,r]);function d(a){const t=new Date(a);return isNaN(t.getTime())?null:t.toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}function _(){return n?.achievements?.length?n.achievements.map((a,t)=>{let h="Achievement still locked";return a.unlocked&&a.dateUnlocked&&(h=d(a.dateUnlocked)),e.jsxs("div",{className:s.achBar,style:{background:a.unlocked?"#0c3718":"#4f0f0d"},children:[e.jsx("div",{className:s.achIcon,children:O(a)}),e.jsxs("div",{className:s.achText,children:[e.jsx("h2",{children:a.title}),e.jsx("p",{children:a.description}),e.jsxs("p",{className:"date",children:["Unlocked on: ",h]})]})]},t)}):e.jsx("p",{children:"No achievements available for this game."})}if(u)return e.jsx(v,{});if(!n)return e.jsxs("div",{className:s.container,children:[e.jsx(p,{}),e.jsx("p",{className:s.error,children:"Game not found."}),e.jsx(x,{})]});const k=n.lastPlayed?d(n.lastPlayed):"Game hasn't been played";return e.jsxs("div",{className:s.container,children:[e.jsx(p,{}),e.jsxs("div",{className:s.page,children:[e.jsxs("div",{className:s.top,children:[e.jsxs("div",{className:s.info,children:[e.jsxs("h1",{className:s.gameTitle,children:[n.gameName," Details"]}),o==="steam"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.link,children:[e.jsx("label",{children:"Open Game at Steam Desktop App: "}),e.jsx("a",{className:s.storeLink,onClick:()=>window.location.href=`steam://store/${r}`,children:" Steam Link "})]}),e.jsxs("div",{className:s.link,children:[e.jsx("label",{children:"Open Game at Steam Website: "}),e.jsx("a",{className:s.storeLink,href:`https://store.steampowered.com/app/${r}`,target:"_blank",rel:"noopener noreferrer",children:" Steam Website "})]})]}),o==="PSN"&&e.jsxs("div",{className:s.link,children:[e.jsx("label",{children:"Open Game on PlayStation Store: "}),e.jsx("a",{className:s.storeLink,href:`https://store.playstation.com/en-us/search/${encodeURIComponent(n.gameName)}`,target:"_blank",rel:"noopener noreferrer",children:"PSN Store"})]}),o==="xbox"&&e.jsxs("div",{className:s.link,children:[e.jsx("label",{children:"Open Game on Xbox Store: "}),e.jsx("a",{className:s.storeLink,href:`https://www.microsoft.com/en-us/p/${encodeURIComponent(n.gameName)}`,target:"_blank",rel:"noopener noreferrer",children:"Xbox Store"})]}),o==="epic"&&e.jsxs("div",{className:s.link,children:[e.jsx("label",{children:"Open Game on Epic Games Store: "}),e.jsx("a",{className:s.storeLink,href:`https://www.epicgames.com/store/en-US/browse?q=${encodeURIComponent(n.gameName)}`,target:"_blank",rel:"noopener noreferrer",children:"Epic Store"})]}),e.jsxs("p",{children:["You bought the game on:"," ",e.jsx("strong",{style:{color:"yellow"},children:o})]}),e.jsxs("p",{children:["Total hours played"," ",e.jsx("strong",{style:{color:"yellow"},children:n.hoursPlayed})]}),e.jsxs("p",{children:["Last played: ",e.jsx("strong",{style:{color:"yellow"},children:k})]})]}),e.jsx("div",{className:s.imgContainer,children:e.jsx("img",{src:n.coverImage,alt:n.gameName,loading:"lazy"})})]}),e.jsx("div",{className:s.achContainer,children:_()})]}),e.jsx(x,{})]})}export{W as default};
