import{r as t,A as j,b as x,j as e,e as u,k as F,l as h,H as N,f as v,F as g,a as l}from"./index-CsEmHfSi.js";import{S as I,a as k,b as y,c as b}from"./index-JAjUgTVY.js";const S="_container_v9cjp_1",B="_page_v9cjp_11",U="_top_v9cjp_20",A="_iconCircle_v9cjp_36",E="_title_v9cjp_48",C="_friendList_v9cjp_54",L="_friendBar_v9cjp_63",P="_friendImage_v9cjp_78",D="_friendInfo_v9cjp_86",w="_friendName_v9cjp_92",G="_friendId_v9cjp_97",R="_friendLink_v9cjp_102",$="_noFriends_v9cjp_113",X="_addFriendBtn_v9cjp_120",n={container:S,page:B,top:U,iconCircle:A,title:E,friendList:C,friendBar:L,friendImage:P,friendInfo:D,friendName:w,friendId:G,friendLink:R,noFriends:$,addFriendBtn:X};function z(){const{user:r}=t.useContext(j),[d,p]=t.useState(null),_=x();t.useEffect(()=>{const i=async()=>{try{let s={...(await l.post("undefined/api/users/friendlist",{publicID:r.publicID})).data.friends};const c=await Promise.all((s.User||[]).map(async o=>{console.log("Fetching details for friend:",o.user);const m=await l.get(`undefined/api/users/${encodeURIComponent(o.user)}`);return{...o,...m.data.user}}));s.User=c,p(s),console.log("Fetched friends:",s)}catch(a){console.error("Failed to fetch friends:",a)}};r?.publicID&&i()},[r,void 0]);const f=[{key:"User",label:"App Friends",icon:u,color:"#FFD700"},{key:"Steam",label:"Steam Friends",icon:F,color:"#091cb2ff"},{key:"Xbox",label:"Xbox Friends",icon:h,color:"#107C10"},{key:"Epic",label:"Epic Games Friends",icon:I,color:"#444"},{key:"PS",label:"PlayStation Friends",icon:k,color:"#003087"},{key:"Nintendo",label:"Nintendo Friends",icon:y,color:"#E60012"},{key:"GOG",label:"GOG Friends",icon:b,color:"#6c43a1"}];return e.jsxs("div",{className:n.container,children:[e.jsx(N,{}),f.map(i=>{const a=i.icon;return e.jsxs("div",{className:n.page,children:[e.jsxs("div",{className:n.top,children:[e.jsx("div",{className:n.iconCircle,style:{backgroundColor:i.color},children:e.jsx(a,{size:36})}),e.jsx("div",{className:n.info,children:e.jsx("h1",{className:n.title,children:i.label})}),i.key==="User"&&e.jsx("button",{className:n.addFriendBtn,onClick:()=>_("/managefriends"),children:"Manage Friends"})]}),e.jsx("ul",{className:n.friendList,children:d?.[i.key]?.filter(s=>s.status==="accepted").length>0?d[i.key].filter(s=>s.status==="accepted").map((s,c)=>e.jsxs("li",{className:n.friendBar,children:[e.jsx("div",{className:n.friendImage,children:e.jsx("img",{src:s.avatar||s.profilePicture||"https://digitalhealthskills.com/wp-content/uploads/2022/11/3da39-no-user-image-icon-27.png",alt:s.displayName||s.name||"Friend avatar",className:n.avatar})}),e.jsxs("div",{className:n.friendInfo,children:[e.jsx("div",{className:n.friendName,children:i.key==="User"?s.name||s.email||"Unknown":s.displayName||"Unknown"}),i.key==="User"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:n.friendId,children:[" UserID: ",s.publicID," "]}),e.jsx(v,{to:`/friends/viewprofile/${s.publicID}`,className:n.friendLink,children:" View Profile "})]}):e.jsxs(e.Fragment,{children:[s.externalId&&e.jsxs("div",{className:n.friendId,children:[i.key," ID: ",s.externalId]}),s.profileUrl&&e.jsx("a",{href:s.profileUrl,target:"_blank",rel:"noreferrer",className:n.friendLink,children:"View Profile"})]})]})]},c)):e.jsx("li",{className:n.noFriends,children:"No accepted friends found"})})]},i.key)}),e.jsx(g,{})]})}export{z as default};
