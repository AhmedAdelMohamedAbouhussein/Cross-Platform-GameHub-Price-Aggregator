import{g as fe,r as v,A as ve,u as me,j as c,L as ge,H as we,F as Ce,a as Y}from"./index-XaG-doU0.js";const xe="_pageContainer_1oo3s_1",_e="_spacer_1oo3s_10",ye="_settingsWrapper_1oo3s_18",Se="_sidebar_1oo3s_29",be="_active_1oo3s_54",Pe="_settingsContainer_1oo3s_60",Re="_title_1oo3s_66",Ee="_section_1oo3s_73",De="_input_1oo3s_83",je="_textarea_1oo3s_83",Ne="_select_1oo3s_83",ze="_button_1oo3s_99",Ae="_profilePicWrapper_1oo3s_114",Me="_profilePic_1oo3s_114",We="_dangerZone_1oo3s_128",Te="_deleteButton_1oo3s_133",Oe="_cropContainer_1oo3s_147",Fe="_cropArea_1oo3s_161",Le="_controls_1oo3s_169",Ie="_zoomSlider_1oo3s_179",Ze="_hiddenFileInput_1oo3s_183",Be="_uploadButton_1oo3s_186",ke="_saveButton_1oo3s_201",Ue="_discardButton_1oo3s_215",p={pageContainer:xe,spacer:_e,settingsWrapper:ye,sidebar:Se,active:be,settingsContainer:Pe,title:Re,section:Ee,input:De,textarea:je,select:Ne,button:ze,profilePicWrapper:Ae,profilePic:Me,dangerZone:We,deleteButton:Te,cropContainer:Oe,cropArea:Fe,controls:Le,zoomSlider:Ie,hiddenFileInput:Ze,uploadButton:Be,saveButton:ke,discardButton:Ue};var V=function(a,r){return V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},V(a,r)};function He(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");V(a,r);function e(){this.constructor=a}a.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var y=function(){return y=Object.assign||function(r){for(var e,t=1,o=arguments.length;t<o;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},y.apply(this,arguments)};var k,K;function Ge(){if(K)return k;K=1;var a=!1,r,e,t,o,n,i,s,l,u,h,m,d,g,_,S;function f(){if(!a){a=!0;var C=navigator.userAgent,x=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(C),E=/(Mac OS X)|(Windows)|(Linux)/.exec(C);if(d=/\b(iPhone|iP[ao]d)/.exec(C),g=/\b(iP[ao]d)/.exec(C),h=/Android/i.exec(C),_=/FBAN\/\w+;/i.exec(C),S=/Mobile/i.exec(C),m=!!/Win64/.exec(C),x){r=x[1]?parseFloat(x[1]):x[5]?parseFloat(x[5]):NaN,r&&document&&document.documentMode&&(r=document.documentMode);var D=/(?:Trident\/(\d+.\d+))/.exec(C);i=D?parseFloat(D[1])+4:r,e=x[2]?parseFloat(x[2]):NaN,t=x[3]?parseFloat(x[3]):NaN,o=x[4]?parseFloat(x[4]):NaN,o?(x=/(?:Chrome\/(\d+\.\d+))/.exec(C),n=x&&x[1]?parseFloat(x[1]):NaN):n=NaN}else r=e=t=n=o=NaN;if(E){if(E[1]){var b=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(C);s=b?parseFloat(b[1].replace("_",".")):!0}else s=!1;l=!!E[2],u=!!E[3]}else s=l=u=!1}}var R={ie:function(){return f()||r},ieCompatibilityMode:function(){return f()||i>r},ie64:function(){return R.ie()&&m},firefox:function(){return f()||e},opera:function(){return f()||t},webkit:function(){return f()||o},safari:function(){return R.webkit()},chrome:function(){return f()||n},windows:function(){return f()||l},osx:function(){return f()||s},linux:function(){return f()||u},iphone:function(){return f()||d},mobile:function(){return f()||d||g||h||S},nativeApp:function(){return f()||_},android:function(){return f()||h},ipad:function(){return f()||g}};return k=R,k}var U,$;function qe(){if($)return U;$=1;var a=!!(typeof window<"u"&&window.document&&window.document.createElement),r={canUseDOM:a,canUseWorkers:typeof Worker<"u",canUseEventListeners:a&&!!(window.addEventListener||window.attachEvent),canUseViewport:a&&!!window.screen,isInWorker:!a};return U=r,U}var H,J;function Ve(){if(J)return H;J=1;var a=qe(),r;a.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function e(t,o){if(!a.canUseDOM||o&&!("addEventListener"in document))return!1;var n="on"+t,i=n in document;if(!i){var s=document.createElement("div");s.setAttribute(n,"return;"),i=typeof s[n]=="function"}return!i&&r&&t==="wheel"&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}return H=e,H}var G,Q;function Xe(){if(Q)return G;Q=1;var a=Ge(),r=Ve(),e=10,t=40,o=800;function n(i){var s=0,l=0,u=0,h=0;return"detail"in i&&(l=i.detail),"wheelDelta"in i&&(l=-i.wheelDelta/120),"wheelDeltaY"in i&&(l=-i.wheelDeltaY/120),"wheelDeltaX"in i&&(s=-i.wheelDeltaX/120),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(s=l,l=0),u=s*e,h=l*e,"deltaY"in i&&(h=i.deltaY),"deltaX"in i&&(u=i.deltaX),(u||h)&&i.deltaMode&&(i.deltaMode==1?(u*=t,h*=t):(u*=o,h*=o)),u&&!s&&(s=u<1?-1:1),h&&!l&&(l=h<1?-1:1),{spinX:s,spinY:l,pixelX:u,pixelY:h}}return n.getEventType=function(){return a.firefox()?"DOMMouseScroll":r("wheel")?"wheel":"mousewheel"},G=n,G}var q,ee;function Ye(){return ee||(ee=1,q=Xe()),q}var Ke=Ye();const $e=fe(Ke);function Je(a,r,e,t,o,n){n===void 0&&(n=0);var i=z(a,r,n),s=i.width,l=i.height,u=Math.min(s,e),h=Math.min(l,t);return u>h*o?{width:h*o,height:h}:{width:u,height:u/o}}function Qe(a){return a.width>a.height?a.width/a.naturalWidth:a.height/a.naturalHeight}function W(a,r,e,t,o){o===void 0&&(o=0);var n=z(r.width,r.height,o),i=n.width,s=n.height;return{x:te(a.x,i,e.width,t),y:te(a.y,s,e.height,t)}}function te(a,r,e,t){var o=r*t/2-e/2;return O(a,-o,o)}function oe(a,r){return Math.sqrt(Math.pow(a.y-r.y,2)+Math.pow(a.x-r.x,2))}function re(a,r){return Math.atan2(r.y-a.y,r.x-a.x)*180/Math.PI}function et(a,r,e,t,o,n,i){n===void 0&&(n=0),i===void 0&&(i=!0);var s=i?tt:ot,l=z(r.width,r.height,n),u=z(r.naturalWidth,r.naturalHeight,n),h={x:s(100,((l.width-e.width/o)/2-a.x/o)/l.width*100),y:s(100,((l.height-e.height/o)/2-a.y/o)/l.height*100),width:s(100,e.width/l.width*100/o),height:s(100,e.height/l.height*100/o)},m=Math.round(s(u.width,h.width*u.width/100)),d=Math.round(s(u.height,h.height*u.height/100)),g=u.width>=u.height*t,_=g?{width:Math.round(d*t),height:d}:{width:m,height:Math.round(m/t)},S=y(y({},_),{x:Math.round(s(u.width-_.width,h.x*u.width/100)),y:Math.round(s(u.height-_.height,h.y*u.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:S}}function tt(a,r){return Math.min(a,Math.max(0,r))}function ot(a,r){return r}function rt(a,r,e,t,o,n){var i=z(r.width,r.height,e),s=O(t.width/i.width*(100/a.width),o,n),l={x:s*i.width/2-t.width/2-i.width*s*(a.x/100),y:s*i.height/2-t.height/2-i.height*s*(a.y/100)};return{crop:l,zoom:s}}function nt(a,r,e){var t=Qe(r);return e.height>e.width?e.height/(a.height*t):e.width/(a.width*t)}function it(a,r,e,t,o,n){e===void 0&&(e=0);var i=z(r.naturalWidth,r.naturalHeight,e),s=O(nt(a,r,t),o,n),l=t.height>t.width?t.height/a.height:t.width/a.width,u={x:((i.width-a.width)/2-a.x)*l,y:((i.height-a.height)/2-a.y)*l};return{crop:u,zoom:s}}function ne(a,r){return{x:(r.x+a.x)/2,y:(r.y+a.y)/2}}function at(a){return a*Math.PI/180}function z(a,r,e){var t=at(e);return{width:Math.abs(Math.cos(t)*a)+Math.abs(Math.sin(t)*r),height:Math.abs(Math.sin(t)*a)+Math.abs(Math.cos(t)*r)}}function O(a,r,e){return Math.min(Math.max(a,r),e)}function T(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];return a.filter(function(e){return typeof e=="string"&&e.length>0}).join(" ").trim()}var st=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,ct=1,lt=3,ut=1,pt=function(a){He(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.cropperRef=v.createRef(),e.imageRef=v.createRef(),e.videoRef=v.createRef(),e.containerPosition={x:0,y:0},e.containerRef=null,e.styleRef=null,e.containerRect=null,e.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},e.dragStartPosition={x:0,y:0},e.dragStartCrop={x:0,y:0},e.gestureZoomStart=0,e.gestureRotationStart=0,e.isTouching=!1,e.lastPinchDistance=0,e.lastPinchRotation=0,e.rafDragTimeout=null,e.rafPinchTimeout=null,e.wheelTimer=null,e.currentDoc=typeof document<"u"?document:null,e.currentWindow=typeof window<"u"?window:null,e.resizeObserver=null,e.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},e.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!e.containerRef)){var t=!0;e.resizeObserver=new window.ResizeObserver(function(o){if(t){t=!1;return}e.computeSizes()}),e.resizeObserver.observe(e.containerRef)}},e.preventZoomSafari=function(t){return t.preventDefault()},e.cleanEvents=function(){e.currentDoc&&(e.currentDoc.removeEventListener("mousemove",e.onMouseMove),e.currentDoc.removeEventListener("mouseup",e.onDragStopped),e.currentDoc.removeEventListener("touchmove",e.onTouchMove),e.currentDoc.removeEventListener("touchend",e.onDragStopped),e.currentDoc.removeEventListener("gesturechange",e.onGestureChange),e.currentDoc.removeEventListener("gestureend",e.onGestureEnd),e.currentDoc.removeEventListener("scroll",e.onScroll))},e.clearScrollEvent=function(){e.containerRef&&e.containerRef.removeEventListener("wheel",e.onWheel),e.wheelTimer&&clearTimeout(e.wheelTimer)},e.onMediaLoad=function(){var t=e.computeSizes();t&&(e.emitCropData(),e.setInitialCrop(t)),e.props.onMediaLoaded&&e.props.onMediaLoaded(e.mediaSize)},e.setInitialCrop=function(t){if(e.props.initialCroppedAreaPercentages){var o=rt(e.props.initialCroppedAreaPercentages,e.mediaSize,e.props.rotation,t,e.props.minZoom,e.props.maxZoom),n=o.crop,i=o.zoom;e.props.onCropChange(n),e.props.onZoomChange&&e.props.onZoomChange(i)}else if(e.props.initialCroppedAreaPixels){var s=it(e.props.initialCroppedAreaPixels,e.mediaSize,e.props.rotation,t,e.props.minZoom,e.props.maxZoom),n=s.crop,i=s.zoom;e.props.onCropChange(n),e.props.onZoomChange&&e.props.onZoomChange(i)}},e.computeSizes=function(){var t,o,n,i,s,l,u=e.imageRef.current||e.videoRef.current;if(u&&e.containerRef){e.containerRect=e.containerRef.getBoundingClientRect(),e.saveContainerPosition();var h=e.containerRect.width/e.containerRect.height,m=((t=e.imageRef.current)===null||t===void 0?void 0:t.naturalWidth)||((o=e.videoRef.current)===null||o===void 0?void 0:o.videoWidth)||0,d=((n=e.imageRef.current)===null||n===void 0?void 0:n.naturalHeight)||((i=e.videoRef.current)===null||i===void 0?void 0:i.videoHeight)||0,g=u.offsetWidth<m||u.offsetHeight<d,_=m/d,S=void 0;if(g)switch(e.state.mediaObjectFit){default:case"contain":S=h>_?{width:e.containerRect.height*_,height:e.containerRect.height}:{width:e.containerRect.width,height:e.containerRect.width/_};break;case"horizontal-cover":S={width:e.containerRect.width,height:e.containerRect.width/_};break;case"vertical-cover":S={width:e.containerRect.height*_,height:e.containerRect.height};break}else S={width:u.offsetWidth,height:u.offsetHeight};e.mediaSize=y(y({},S),{naturalWidth:m,naturalHeight:d}),e.props.setMediaSize&&e.props.setMediaSize(e.mediaSize);var f=e.props.cropSize?e.props.cropSize:Je(e.mediaSize.width,e.mediaSize.height,e.containerRect.width,e.containerRect.height,e.props.aspect,e.props.rotation);return(((s=e.state.cropSize)===null||s===void 0?void 0:s.height)!==f.height||((l=e.state.cropSize)===null||l===void 0?void 0:l.width)!==f.width)&&e.props.onCropSizeChange&&e.props.onCropSizeChange(f),e.setState({cropSize:f},e.recomputeCropPosition),e.props.setCropSize&&e.props.setCropSize(f),f}},e.saveContainerPosition=function(){if(e.containerRef){var t=e.containerRef.getBoundingClientRect();e.containerPosition={x:t.left,y:t.top}}},e.onMouseDown=function(t){e.currentDoc&&(t.preventDefault(),e.currentDoc.addEventListener("mousemove",e.onMouseMove),e.currentDoc.addEventListener("mouseup",e.onDragStopped),e.saveContainerPosition(),e.onDragStart(r.getMousePoint(t)))},e.onMouseMove=function(t){return e.onDrag(r.getMousePoint(t))},e.onScroll=function(t){e.currentDoc&&(t.preventDefault(),e.saveContainerPosition())},e.onTouchStart=function(t){e.currentDoc&&(e.isTouching=!0,!(e.props.onTouchRequest&&!e.props.onTouchRequest(t))&&(e.currentDoc.addEventListener("touchmove",e.onTouchMove,{passive:!1}),e.currentDoc.addEventListener("touchend",e.onDragStopped),e.saveContainerPosition(),t.touches.length===2?e.onPinchStart(t):t.touches.length===1&&e.onDragStart(r.getTouchPoint(t.touches[0]))))},e.onTouchMove=function(t){t.preventDefault(),t.touches.length===2?e.onPinchMove(t):t.touches.length===1&&e.onDrag(r.getTouchPoint(t.touches[0]))},e.onGestureStart=function(t){e.currentDoc&&(t.preventDefault(),e.currentDoc.addEventListener("gesturechange",e.onGestureChange),e.currentDoc.addEventListener("gestureend",e.onGestureEnd),e.gestureZoomStart=e.props.zoom,e.gestureRotationStart=e.props.rotation)},e.onGestureChange=function(t){if(t.preventDefault(),!e.isTouching){var o=r.getMousePoint(t),n=e.gestureZoomStart-1+t.scale;if(e.setNewZoom(n,o,{shouldUpdatePosition:!0}),e.props.onRotationChange){var i=e.gestureRotationStart+t.rotation;e.props.onRotationChange(i)}}},e.onGestureEnd=function(t){e.cleanEvents()},e.onDragStart=function(t){var o,n,i=t.x,s=t.y;e.dragStartPosition={x:i,y:s},e.dragStartCrop=y({},e.props.crop),(n=(o=e.props).onInteractionStart)===null||n===void 0||n.call(o)},e.onDrag=function(t){var o=t.x,n=t.y;e.currentWindow&&(e.rafDragTimeout&&e.currentWindow.cancelAnimationFrame(e.rafDragTimeout),e.rafDragTimeout=e.currentWindow.requestAnimationFrame(function(){if(e.state.cropSize&&!(o===void 0||n===void 0)){var i=o-e.dragStartPosition.x,s=n-e.dragStartPosition.y,l={x:e.dragStartCrop.x+i,y:e.dragStartCrop.y+s},u=e.props.restrictPosition?W(l,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):l;e.props.onCropChange(u)}}))},e.onDragStopped=function(){var t,o;e.isTouching=!1,e.cleanEvents(),e.emitCropData(),(o=(t=e.props).onInteractionEnd)===null||o===void 0||o.call(t)},e.onWheel=function(t){if(e.currentWindow&&!(e.props.onWheelRequest&&!e.props.onWheelRequest(t))){t.preventDefault();var o=r.getMousePoint(t),n=$e(t).pixelY,i=e.props.zoom-n*e.props.zoomSpeed/200;e.setNewZoom(i,o,{shouldUpdatePosition:!0}),e.state.hasWheelJustStarted||e.setState({hasWheelJustStarted:!0},function(){var s,l;return(l=(s=e.props).onInteractionStart)===null||l===void 0?void 0:l.call(s)}),e.wheelTimer&&clearTimeout(e.wheelTimer),e.wheelTimer=e.currentWindow.setTimeout(function(){return e.setState({hasWheelJustStarted:!1},function(){var s,l;return(l=(s=e.props).onInteractionEnd)===null||l===void 0?void 0:l.call(s)})},250)}},e.getPointOnContainer=function(t,o){var n=t.x,i=t.y;if(!e.containerRect)throw new Error("The Cropper is not mounted");return{x:e.containerRect.width/2-(n-o.x),y:e.containerRect.height/2-(i-o.y)}},e.getPointOnMedia=function(t){var o=t.x,n=t.y,i=e.props,s=i.crop,l=i.zoom;return{x:(o+s.x)/l,y:(n+s.y)/l}},e.setNewZoom=function(t,o,n){var i=n===void 0?{}:n,s=i.shouldUpdatePosition,l=s===void 0?!0:s;if(!(!e.state.cropSize||!e.props.onZoomChange)){var u=O(t,e.props.minZoom,e.props.maxZoom);if(l){var h=e.getPointOnContainer(o,e.containerPosition),m=e.getPointOnMedia(h),d={x:m.x*u-h.x,y:m.y*u-h.y},g=e.props.restrictPosition?W(d,e.mediaSize,e.state.cropSize,u,e.props.rotation):d;e.props.onCropChange(g)}e.props.onZoomChange(u)}},e.getCropData=function(){if(!e.state.cropSize)return null;var t=e.props.restrictPosition?W(e.props.crop,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):e.props.crop;return et(t,e.mediaSize,e.state.cropSize,e.getAspect(),e.props.zoom,e.props.rotation,e.props.restrictPosition)},e.emitCropData=function(){var t=e.getCropData();if(t){var o=t.croppedAreaPercentages,n=t.croppedAreaPixels;e.props.onCropComplete&&e.props.onCropComplete(o,n),e.props.onCropAreaChange&&e.props.onCropAreaChange(o,n)}},e.emitCropAreaChange=function(){var t=e.getCropData();if(t){var o=t.croppedAreaPercentages,n=t.croppedAreaPixels;e.props.onCropAreaChange&&e.props.onCropAreaChange(o,n)}},e.recomputeCropPosition=function(){if(e.state.cropSize){var t=e.props.restrictPosition?W(e.props.crop,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):e.props.crop;e.props.onCropChange(t),e.emitCropData()}},e.onKeyDown=function(t){var o,n,i=e.props,s=i.crop,l=i.onCropChange,u=i.keyboardStep,h=i.zoom,m=i.rotation,d=u;if(e.state.cropSize){t.shiftKey&&(d*=.2);var g=y({},s);switch(t.key){case"ArrowUp":g.y-=d,t.preventDefault();break;case"ArrowDown":g.y+=d,t.preventDefault();break;case"ArrowLeft":g.x-=d,t.preventDefault();break;case"ArrowRight":g.x+=d,t.preventDefault();break;default:return}e.props.restrictPosition&&(g=W(g,e.mediaSize,e.state.cropSize,h,m)),t.repeat||(n=(o=e.props).onInteractionStart)===null||n===void 0||n.call(o),l(g)}},e.onKeyUp=function(t){var o,n;switch(t.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":t.preventDefault();break;default:return}e.emitCropData(),(n=(o=e.props).onInteractionEnd)===null||n===void 0||n.call(o)},e}return r.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=st,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},r.prototype.componentWillUnmount=function(){var e,t;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((t=this.styleRef.parentNode)===null||t===void 0||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},r.prototype.componentDidUpdate=function(e){var t,o,n,i,s,l,u,h,m;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():((t=e.cropSize)===null||t===void 0?void 0:t.height)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.height)||((n=e.cropSize)===null||n===void 0?void 0:n.width)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.width)?this.computeSizes():(((s=e.crop)===null||s===void 0?void 0:s.x)!==((l=this.props.crop)===null||l===void 0?void 0:l.x)||((u=e.crop)===null||u===void 0?void 0:u.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&((m=this.videoRef.current)===null||m===void 0||m.load());var d=this.getObjectFit();d!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:d},this.computeSizes)},r.prototype.getAspect=function(){var e=this.props,t=e.cropSize,o=e.aspect;return t?t.width/t.height:o},r.prototype.getObjectFit=function(){var e,t,o,n;if(this.props.objectFit==="cover"){var i=this.imageRef.current||this.videoRef.current;if(i&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var s=this.containerRect.width/this.containerRect.height,l=((e=this.imageRef.current)===null||e===void 0?void 0:e.naturalWidth)||((t=this.videoRef.current)===null||t===void 0?void 0:t.videoWidth)||0,u=((o=this.imageRef.current)===null||o===void 0?void 0:o.naturalHeight)||((n=this.videoRef.current)===null||n===void 0?void 0:n.videoHeight)||0,h=l/u;return h<s?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},r.prototype.onPinchStart=function(e){var t=r.getTouchPoint(e.touches[0]),o=r.getTouchPoint(e.touches[1]);this.lastPinchDistance=oe(t,o),this.lastPinchRotation=re(t,o),this.onDragStart(ne(t,o))},r.prototype.onPinchMove=function(e){var t=this;if(!(!this.currentDoc||!this.currentWindow)){var o=r.getTouchPoint(e.touches[0]),n=r.getTouchPoint(e.touches[1]),i=ne(o,n);this.onDrag(i),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var s=oe(o,n),l=t.props.zoom*(s/t.lastPinchDistance);t.setNewZoom(l,i,{shouldUpdatePosition:!1}),t.lastPinchDistance=s;var u=re(o,n),h=t.props.rotation+(u-t.lastPinchRotation);t.props.onRotationChange&&t.props.onRotationChange(h),t.lastPinchRotation=u})}},r.prototype.render=function(){var e=this,t,o=this.props,n=o.image,i=o.video,s=o.mediaProps,l=o.cropperProps,u=o.transform,h=o.crop,m=h.x,d=h.y,g=o.rotation,_=o.zoom,S=o.cropShape,f=o.showGrid,R=o.roundCropAreaPixels,C=o.style,x=C.containerStyle,E=C.cropAreaStyle,D=C.mediaStyle,b=o.classes,F=b.containerClassName,L=b.cropAreaClassName,N=b.mediaClassName,P=(t=this.state.mediaObjectFit)!==null&&t!==void 0?t:this.getObjectFit();return v.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(M){return e.containerRef=M},"data-testid":"container",style:x,className:T("reactEasyCrop_Container",F)},n?v.createElement("img",y({alt:"",className:T("reactEasyCrop_Image",P==="contain"&&"reactEasyCrop_Contain",P==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",P==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",N)},s,{src:n,ref:this.imageRef,style:y(y({},D),{transform:u||"translate(".concat(m,"px, ").concat(d,"px) rotate(").concat(g,"deg) scale(").concat(_,")")}),onLoad:this.onMediaLoad})):i&&v.createElement("video",y({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:T("reactEasyCrop_Video",P==="contain"&&"reactEasyCrop_Contain",P==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",P==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",N)},s,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:y(y({},D),{transform:u||"translate(".concat(m,"px, ").concat(d,"px) rotate(").concat(g,"deg) scale(").concat(_,")")}),controls:!1}),(Array.isArray(i)?i:[{src:i}]).map(function(A){return v.createElement("source",y({key:A.src},A))})),this.state.cropSize&&v.createElement("div",y({ref:this.cropperRef,style:y(y({},E),{width:R?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:R?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:T("reactEasyCrop_CropArea",S==="round"&&"reactEasyCrop_CropAreaRound",f&&"reactEasyCrop_CropAreaGrid",L)},l)))},r.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:lt,minZoom:ct,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:ut},r.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},r.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},r}(v.Component);function ht(a,r){return new Promise((e,t)=>{const o=new Image;o.src=a,o.crossOrigin="anonymous",o.onload=()=>{const n=document.createElement("canvas"),i=n.getContext("2d");n.width=r.width,n.height=r.height,i.drawImage(o,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.toBlob(s=>{if(!s){t(new Error("Canvas is empty"));return}const l=new File([s],"cropped.jpg",{type:"image/jpeg"});e(l)},"image/jpeg")},o.onerror=n=>{t(n)}})}function ft(){const{user:a}=v.useContext(ve),r=void 0,e=me(),[t,o]=v.useState(!1),[n,i]=v.useState("profile"),[s,l]=v.useState(null),[u,h]=v.useState(a.name),[m,d]=v.useState(a.bio?a.bio:""),[g,_]=v.useState(a.profileVisibility),[S,f]=v.useState(null),[R,C]=v.useState(!1),[x,E]=v.useState({x:0,y:0}),[D,b]=v.useState(1),[F,L]=v.useState(null),[N,P]=v.useState(null),[A,M]=v.useState(null),[ie,I]=v.useState(null),[ae,Z]=v.useState(null),[X,B]=v.useState(null),se=async()=>{o(!0);try{if(A&&N){const j=new FormData;j.append("profileImage",N,"profile.jpg"),await Y.post(`${r}/setting/profileImage`,j,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})}const w={};ae&&m&&(w.bio=m),ie&&u&&(w.username=u),X&&X&&(w.visibility=g),Object.keys(w).length>0&&await Y.post(`${r}/setting/updateProfile`,w,{withCredentials:!0}),M(!1),I(!1),Z(!1),B(!1),e(0)}catch(w){console.error("Save failed:",w),alert("Failed to save changes. Try again.")}finally{o(!1)}},ce=()=>{l(a.profilePicture||null),h(a.name||"PlayerOne"),d(a.bio||""),_(a.visibility||"friends"),f(null),C(!1),P(null),M(!1),Z(!1),B(!1),I(!1),e(0)},le=w=>{const j=w.target.files[0];j&&(f(URL.createObjectURL(j)),C(!0))},ue=v.useCallback((w,j)=>{L(j)},[]),pe=async()=>{try{o(!0);const w=await ht(S,F);P(w),M(!0),l(URL.createObjectURL(N)),C(!1),f(null)}catch(w){console.error("Upload failed:",w)}finally{o(!1)}},he=()=>{C(!1),f(null)},de=()=>{switch(n){case"profile":return c.jsxs("div",{children:[c.jsx("h2",{className:p.title,children:"Profile Settings"}),c.jsxs("section",{className:p.section,children:[c.jsx("h3",{children:"Profile Picture"}),c.jsx("div",{className:p.profilePicWrapper,children:R?c.jsxs("div",{children:[c.jsx("div",{className:p.cropContainer,children:c.jsx("div",{className:p.cropArea,children:c.jsx(pt,{image:S,crop:x,zoom:D,aspect:1,cropShape:"round",showGrid:!1,onCropChange:E,onZoomChange:b,onCropComplete:ue})})}),c.jsxs("div",{className:p.controls,children:[c.jsx("input",{type:"range",min:1,max:3,step:.1,value:D,onChange:w=>b(Number(w.target.value)),className:p.zoomSlider}),c.jsxs("div",{className:p.cropButtons,children:[c.jsx("button",{onClick:pe,className:p.button,children:"Done"}),c.jsx("button",{onClick:he,className:p.deleteButton,children:"Cancel"})]})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:s||a.profilePicture||"https://digitalhealthskills.com/wp-content/uploads/2022/11/3da39-no-user-image-icon-27.png",alt:"Profile",className:p.profilePic}),c.jsx("input",{type:"file",id:"profilePicUpload",accept:"image/*",onChange:le,className:p.hiddenFileInput}),c.jsx("label",{htmlFor:"profilePicUpload",className:p.uploadButton,children:"Upload Image"})]})})]}),c.jsxs("section",{className:p.section,children:[c.jsx("h3",{children:"Display Name"}),c.jsx("input",{type:"text",value:u,onChange:w=>{h(w.target.value),I(!0)},className:p.input})]}),c.jsxs("section",{className:p.section,children:[c.jsx("h3",{children:"Bio"}),c.jsx("textarea",{value:a.bio,onChange:w=>{d(w.target.value),Z(!0)},className:p.textarea})]}),c.jsx("section",{className:p.section,children:c.jsx("h3",{children:"Social Links"})})]});case"account":return c.jsxs("div",{children:[c.jsx("h2",{className:p.title,children:"Account Settings"}),c.jsxs("section",{className:p.section,children:[c.jsx("h3",{children:"Change Email"}),c.jsx("input",{type:"email",placeholder:"New Email",className:p.input}),c.jsx("button",{className:p.button,children:"Send Verification Link"})]}),c.jsxs("section",{className:p.section,children:[c.jsx("h3",{children:"Change Password"}),c.jsx("input",{type:"password",placeholder:"Current Password",className:p.input}),c.jsx("input",{type:"password",placeholder:"New Password",className:p.input}),c.jsx("input",{type:"password",placeholder:"Confirm New Password",className:p.input}),c.jsx("button",{className:p.button,children:"Update Password"})]})]});case"privacy":return c.jsxs("div",{children:[c.jsx("h2",{className:p.title,children:"Privacy Settings"}),c.jsxs("section",{className:p.section,children:[c.jsx("h3",{children:"Profile Visibility"}),c.jsxs("select",{value:g,onChange:w=>{_(w.target.value),B(!0)},className:p.select,children:[c.jsx("option",{value:"public",children:"Public"}),c.jsx("option",{value:"friends",children:"Friends Only"}),c.jsx("option",{value:"private",children:"Private"})]})]})]});case"danger":return c.jsxs("div",{children:[c.jsx("h2",{className:p.title,children:"Danger Zone"}),c.jsxs("section",{className:`${p.section} ${p.dangerZone}`,children:[c.jsx("p",{children:"This action is irreversible. Proceed with caution."}),c.jsx("button",{className:p.deleteButton,children:"Delete Account"})]})]});default:return c.jsx("h2",{children:"Select an option from the sidebar"})}};return c.jsxs("div",{className:p.pageContainer,children:[t&&c.jsx(ge,{}),"   ",c.jsx(we,{}),c.jsx("div",{className:p.spacer,children:c.jsxs("div",{className:p.settingsWrapper,children:[c.jsx("aside",{className:p.sidebar,children:c.jsxs("ul",{children:[c.jsx("li",{onClick:()=>i("profile"),className:n==="profile"?p.active:"",children:"Profile"}),c.jsx("li",{onClick:()=>i("account"),className:n==="account"?p.active:"",children:"Account"}),c.jsx("li",{onClick:()=>i("privacy"),className:n==="privacy"?p.active:"",children:"Privacy"}),c.jsx("li",{onClick:()=>i("danger"),className:n==="danger"?p.active:"",children:"Danger Zone"})]})}),c.jsxs("main",{className:p.settingsContainer,children:[de(),c.jsxs("div",{className:p.saveStickyWrapper,children:[c.jsx("button",{onClick:se,className:p.saveButton,children:"Save All Changes"}),c.jsx("button",{onClick:ce,className:p.discardButton,children:"Discard Changes"})]})]})]})}),c.jsx(Ce,{})]})}export{ft as default};
