import{s as v,r as c,A as S,j as e,L as N,H as g,F as p,a as y,t as w,v as z}from"./index-DTw5IBFM.js";const A="_container_1memk_1",b="_top_1memk_12",L="_info_1memk_26",B="_page_1memk_45",C="_gameTitle_1memk_55",I="_storeLink_1memk_60",T="_achContainer_1memk_71",D="_achBar_1memk_83",G="_achText_1memk_100",s={container:A,top:b,info:L,page:B,gameTitle:C,storeLink:I,achContainer:T,achBar:D,achText:G},P="/Web_App/assets/bronze-Bgn6DOiF.png",E="/Web_App/assets/silver-DV1mQrOL.png",F="/Web_App/assets/gold-B6wCK90w.png",W="/Web_App/assets/plat-CuWQImji.png";function U(r){switch(r.type){case"bronze":return e.jsx("img",{src:P,alt:"Bronze",width:50,height:65});case"silver":return e.jsx("img",{src:E,alt:"Silver",width:50,height:65});case"gold":return e.jsx("img",{src:F,alt:"Gold",width:50,height:65});case"platinum":return e.jsx("img",{src:W,alt:"Platinum",width:50,height:65})}return r.unlocked?e.jsx(w,{color:"#00ff80",size:45}):e.jsx(z,{color:"#ff4c4c",size:45})}function $(){const[l]=v(),o=l.get("platform"),i=l.get("id"),{user:d}=c.useContext(S),[n,x]=c.useState(null),[j,f]=c.useState(!0);c.useEffect(()=>{window.scrollTo(0,0),d&&o&&i&&(async()=>{try{const a=await y.post(`undefined/api/users/ownedgames/${o}/${i}`,{},{withCredentials:!0});x(a.data.game),console.log("Fetched owned game:",a.data.game)}catch(a){console.error("Fetch failed:",a)}finally{f(!1)}})()},[d,void 0,o,i]);function m(t){const a=new Date(t);return isNaN(a.getTime())?null:a.toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}function _(){return n?.achievements?.length?n.achievements.map((t,a)=>{let h="Achievement still locked";return t.unlocked&&t.dateUnlocked&&(h=m(t.dateUnlocked)),e.jsxs("div",{className:s.achBar,style:{background:t.unlocked?"#0c3718":"#4f0f0d"},children:[e.jsx("div",{className:s.achIcon,children:U(t)}),e.jsxs("div",{className:s.achText,children:[e.jsx("h2",{children:t.title}),e.jsx("p",{children:t.description}),e.jsxs("p",{className:"date",children:["Unlocked on: ",h]})]})]},a)}):e.jsx("p",{children:"No achievements available for this game."})}if(j)return e.jsx(N,{});if(!n)return e.jsxs("div",{className:s.container,children:[e.jsx(g,{}),e.jsx("p",{className:s.error,children:"Game not found."}),e.jsx(p,{})]});const k=n.lastPlayed?m(n.lastPlayed):"Game hasn't been played";return e.jsxs("div",{className:s.container,children:[e.jsx(g,{}),e.jsxs("div",{className:s.page,children:[e.jsxs("div",{className:s.top,children:[e.jsxs("div",{className:s.info,children:[e.jsxs("h1",{className:s.gameTitle,children:[n.gameName," Details"]}),e.jsxs("div",{className:s.link,children:[e.jsx("label",{children:"Open Game at Steam Desktop App: "}),e.jsx("a",{className:s.storeLink,onClick:()=>window.location.href=`steam://store/${i}`,children:"Steam Link"})]}),e.jsxs("div",{className:s.link,children:[e.jsx("label",{children:"Open Game at Steam Website: "}),e.jsx("a",{className:s.storeLink,href:`https://store.steampowered.com/app/${i}`,target:"_blank",rel:"noopener noreferrer",children:"Steam Website"})]}),e.jsxs("p",{children:["You bought the game on:"," ",e.jsx("strong",{style:{color:"yellow"},children:o})]}),e.jsxs("p",{children:["Total hours played"," ",e.jsx("strong",{style:{color:"yellow"},children:n.hoursPlayed})]}),e.jsxs("p",{children:["Last played: ",e.jsx("strong",{style:{color:"yellow"},children:k})]})]}),e.jsx("div",{className:s.imgContainer,children:e.jsx("img",{src:n.coverImage,alt:n.gameName,loading:"lazy"})})]}),e.jsx("div",{className:s.achContainer,children:_()})]}),e.jsx(p,{})]})}export{$ as default};
