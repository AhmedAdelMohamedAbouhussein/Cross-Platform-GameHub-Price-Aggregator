import{r as t,A as j,b as x,j as e,e as F,k as N,l as h,H as v,f as u,F as k,a as l}from"./index-BxVgz_XF.js";import{S as g,a as y,b as I,c as b}from"./index-JZ3Hnhap.js";const S="_container_v9cjp_1",B="_page_v9cjp_11",A="_top_v9cjp_20",E="_iconCircle_v9cjp_36",U="_title_v9cjp_48",L="_friendList_v9cjp_54",P="_friendBar_v9cjp_63",C="_friendImage_v9cjp_78",w="_friendInfo_v9cjp_86",G="_friendName_v9cjp_92",D="_friendId_v9cjp_97",$="_friendLink_v9cjp_102",R="_noFriends_v9cjp_113",X="_addFriendBtn_v9cjp_120",n={container:S,page:B,top:A,iconCircle:E,title:U,friendList:L,friendBar:P,friendImage:C,friendInfo:w,friendName:G,friendId:D,friendLink:$,noFriends:R,addFriendBtn:X};function z(){const{user:r}=t.useContext(j),[o,_]=t.useState(null),f=x();t.useEffect(()=>{const i=async()=>{try{let s={...(await l.post("undefined/api/users/friendlist",{userId:r._id})).data.friends};const c=await Promise.all((s.User||[]).map(async d=>{const p=await l.get(`undefined/api/users/${d.user}`);return{...d,...p.data.user}}));s.User=c,_(s),console.log("Fetched friends:",s)}catch(a){console.error("Failed to fetch friends:",a)}};r?._id&&i()},[r,void 0]);const m=[{key:"User",label:"App Friends",icon:F,color:"#FFD700"},{key:"Steam",label:"Steam Friends",icon:N,color:"#091cb2ff"},{key:"Xbox",label:"Xbox Friends",icon:h,color:"#107C10"},{key:"Epic",label:"Epic Games Friends",icon:g,color:"#444"},{key:"PS",label:"PlayStation Friends",icon:y,color:"#003087"},{key:"Nintendo",label:"Nintendo Friends",icon:I,color:"#E60012"},{key:"GOG",label:"GOG Friends",icon:b,color:"#6c43a1"}];return e.jsxs("div",{className:n.container,children:[e.jsx(v,{}),m.map(i=>{const a=i.icon;return e.jsxs("div",{className:n.page,children:[e.jsxs("div",{className:n.top,children:[e.jsx("div",{className:n.iconCircle,style:{backgroundColor:i.color},children:e.jsx(a,{size:36})}),e.jsx("div",{className:n.info,children:e.jsx("h1",{className:n.title,children:i.label})}),i.key==="User"&&e.jsx("button",{className:n.addFriendBtn,onClick:()=>f("/managefriends"),children:"Manage Friends"})]}),e.jsx("ul",{className:n.friendList,children:o?.[i.key]?.filter(s=>s.status==="accepted").length>0?o[i.key].filter(s=>s.status==="accepted").map((s,c)=>e.jsxs("li",{className:n.friendBar,children:[e.jsx("div",{className:n.friendImage,children:e.jsx("img",{src:s.avatar||s.profilePicture||"https://digitalhealthskills.com/wp-content/uploads/2022/11/3da39-no-user-image-icon-27.png",alt:s.displayName||s.name||"Friend avatar",className:n.avatar})}),e.jsxs("div",{className:n.friendInfo,children:[e.jsx("div",{className:n.friendName,children:i.key==="User"?s.name||s.email||"Unknown":s.displayName||"Unknown"}),i.key==="User"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:n.friendId,children:[" UserID: ",s._id," "]}),e.jsx(u,{to:`/friends/viewprofile/${s._id}`,className:n.friendLink,children:" View Profile "})]}):e.jsxs(e.Fragment,{children:[s.externalId&&e.jsxs("div",{className:n.friendId,children:[i.key," ID: ",s.externalId]}),s.profileUrl&&e.jsx("a",{href:s.profileUrl,target:"_blank",rel:"noreferrer",className:n.friendLink,children:"View Profile"})]})]})]},c)):e.jsx("li",{className:n.noFriends,children:"No accepted friends found"})})]},i.key)}),e.jsx(k,{})]})}export{z as default};
